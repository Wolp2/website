<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Photodump!</title>
  <link rel="stylesheet" href="style.css" />

  <style>
    /* Page layout */
    main { max-width: 1000px; margin: 0 auto; padding: 20px; }
    h1 { text-align: center; }

    /* --- Gallery layout --- */
    .gallery {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 16px;
      padding: 10px;
    }

    /* --- Each figure (image + caption) --- */
    .gallery figure {
      margin: 0;
      border-radius: 12px;
      overflow: hidden;
      background: #fff;
      box-shadow: 0 4px 10px rgba(0,0,0,0.15);
      transition: transform 0.3s ease;
    }
    .gallery figure:hover { transform: scale(1.03); }

    .gallery img { width: 100%; display: block; }

    .gallery figcaption {
      padding: 8px 0;
      font-size: 0.9rem;
      color: #333;
      text-align: center;
      background: #f9f9f9;
      border-top: 1px solid #eee;
    }

    /* --- Lightbox overlay --- */
    .lightbox {
      position: fixed;
      inset: 0;
      display: none;            /* hidden by default */
      align-items: center;
      justify-content: center;
      background: rgba(0,0,0,.85);
      z-index: 1000;
      padding: 20px;
    }
    .lightbox.open { display: flex; }

    .lightbox-content {
      max-width: 90vw;
      max-height: 90vh;
      display: grid;
      grid-template-rows: auto auto;
      gap: 10px;
      align-items: center;
      justify-items: center;
    }
    .lightbox-img {
      max-width: 90vw;
      max-height: 80vh;
      object-fit: contain;
      border-radius: 8px;
      background: #111;
      cursor: pointer; /* click to go next */
    }
    .lightbox-caption { color: #eee; text-align: center; font-size: .95rem; }

    .lightbox-close {
      position: absolute;
      top: 14px;
      right: 16px;
      background: transparent;
      border: none;
      color: #fff;
      font-size: 28px;
      cursor: pointer;
      line-height: 1;
    }
    .lightbox-close:hover { opacity: .85; }

    /* Prev/Next buttons */
    .lightbox-nav-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(255,255,255,0.12);
      color: #fff;
      border: 1px solid rgba(255,255,255,0.25);
      border-radius: 999px;
      width: 44px;
      height: 44px;
      display: grid;
      place-items: center;
      font-size: 22px;
      cursor: pointer;
      user-select: none;
    }
    .lightbox-nav-btn:hover { background: rgba(255,255,255,0.22); }
    .lightbox-prev { left: 16px; }
    .lightbox-next { right: 16px; }

    /* touch targets on small screens */
    @media (max-width:600px){
      .lightbox-nav-btn { width: 52px; height: 52px; font-size: 26px; }
    }
  </style>
</head>
<body>

  <header>
    <h1>ðŸ“¸ Photodump!</h1>
    <p>A random collection of memories from 2025 and beyond.</p>
  </header>

  <!-- Shared navbar (nav.html must be in the same folder) -->
  <div id="navbar" style="min-height:50px"></div>
  <script>
    fetch("nav.html")
      .then(res => res.text())
      .then(html => document.getElementById("navbar").innerHTML = html)
      .catch(err => console.error("Failed to load nav:", err));
  </script>

  <main>
    <div class="gallery">
      <figure>
        <img src="images/snowman.webp" alt="Snowman" loading="lazy">
        <figcaption>Snowman</figcaption>
      </figure>

      <figure>
        <img src="images/Battle_n_brew.jpg" alt="Battle N Brew" loading="lazy">
        <figcaption>Battle N Brew</figcaption>
      </figure>

      <figure>
        <img src="images/hunnidk.jpg" alt="Hunnid K" loading="lazy">
        <figcaption>Hunnid K</figcaption>
      </figure>

      <figure>
        <img src="images/cubsgame.jpg" alt="Cubs Game" loading="lazy">
        <figcaption>Cubs Game</figcaption>
      </figure>

      <figure>
        <img src="images/ddp_vs_chimaev.jpg" alt="DDP vs Chimaev" loading="lazy">
        <figcaption>DDP vs Chimaev</figcaption>
      </figure>

      <figure>
        <img src="images/falcons_vs_buccs.jpg" alt="Falcons vs Buccs" loading="lazy">
        <figcaption>Falcons vs Buccs</figcaption>
      </figure>

      <figure>
        <img src="images/water_rafting.webp" alt="Water Rafting" loading="lazy">
        <figcaption>Water Rafting</figcaption>
      </figure>

      <figure>
        <img src="images/red_fox.webp" alt="Red Fox" loading="lazy">
        <figcaption>Red Fox</figcaption>
      </figure>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 William Lopez. All rights reserved.</p>
  </footer>

  <!-- Lightbox modal -->
  <div id="lightbox" class="lightbox" aria-hidden="true" role="dialog" aria-label="Image viewer">
    <button class="lightbox-close" aria-label="Close">&times;</button>

    <!-- Prev/Next controls -->
    <button class="lightbox-nav-btn lightbox-prev" aria-label="Previous image">&#10094;</button>
    <button class="lightbox-nav-btn lightbox-next" aria-label="Next image">&#10095;</button>

    <div class="lightbox-content">
      <img class="lightbox-img" alt="">
      <div class="lightbox-caption"></div>
    </div>
  </div>

  <!-- Lightbox script (placed AFTER the markup so elements exist) -->
  <script>
    (() => {
      const gallery = document.querySelector('.gallery');
      const items = Array.from(document.querySelectorAll('.gallery figure img')); // ordered list
      const box = document.getElementById('lightbox');
      const img = box.querySelector('.lightbox-img');
      const cap = box.querySelector('.lightbox-caption');
      const closeBtn = box.querySelector('.lightbox-close');
      const prevBtn = box.querySelector('.lightbox-prev');
      const nextBtn = box.querySelector('.lightbox-next');

      if (!gallery || !box || items.length === 0) return;

      let idx = -1; // current index in items

      function openAt(i){
        idx = (i + items.length) % items.length; // wrap
        const thumb = items[idx];
        const full = thumb.dataset.full || thumb.src;
        const caption = thumb.alt || thumb.closest('figure')?.querySelector('figcaption')?.textContent || '';

        img.src = full;
        img.alt = caption;
        cap.textContent = caption;

        box.classList.add('open');
        box.setAttribute('aria-hidden', 'false');
        document.body.style.overflow = 'hidden';
      }

      function closeLightbox() {
        box.classList.remove('open');
        box.setAttribute('aria-hidden', 'true');
        img.src = '';
        document.body.style.overflow = '';
        idx = -1;
      }

      function showNext(){ if (idx !== -1) openAt(idx + 1); }
      function showPrev(){ if (idx !== -1) openAt(idx - 1); }

      // Open on click within gallery
      gallery.addEventListener('click', (e) => {
        const target = e.target.closest('img');
        if (!target) return;
        const i = items.indexOf(target);
        if (i >= 0) openAt(i);
      });

      // Click image to advance
      img.addEventListener('click', showNext);

      // Buttons
      nextBtn.addEventListener('click', (e) => { e.stopPropagation(); showNext(); });
      prevBtn.addEventListener('click', (e) => { e.stopPropagation(); showPrev(); });

      // Close behaviors
      closeBtn.addEventListener('click', closeLightbox);
      box.addEventListener('click', (e) => { if (e.target === box) closeLightbox(); });

      // Keyboard
      window.addEventListener('keydown', (e) => {
        if (!box.classList.contains('open')) return;
        if (e.key === 'Escape') closeLightbox();
        else if (e.key === 'ArrowRight') showNext();
        else if (e.key === 'ArrowLeft') showPrev();
      });

      // Basic swipe support (optional)
      let touchX = null;
      box.addEventListener('touchstart', (e) => { touchX = e.changedTouches[0].clientX; }, {passive:true});
      box.addEventListener('touchend', (e) => {
        if (touchX === null) return;
        const dx = e.changedTouches[0].clientX - touchX;
        touchX = null;
        if (Math.abs(dx) > 40) { dx < 0 ? showNext() : showPrev(); }
      }, {passive:true});
    })();
  </script>

</body>
</html>
